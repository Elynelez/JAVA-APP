<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tabla de Rutas</title>

  <!-- Estilos de Tabulator -->
  <link href="https://unpkg.com/tabulator-tables@5.5.0/dist/css/tabulator.min.css" rel="stylesheet">

  <!-- Estilos personalizados -->
  <style>
    body {
      background-color: #1e1e2f;
      color: #fff;
      font-family: sans-serif;
    }

    h2, p {
      color: #61dafb;
    }

    #tabla-entregas {
      background-color: #282c34;
      border-radius: 8px;
    }

    .tabulator .tabulator-header {
      background: #282c34;
      color: #61dafb;
    }

    .tabulator .tabulator-cell {
      color: #fff;
      background-color: #1e1e2f;
    }

    .status-label {
      padding: 4px 8px;
      border-radius: 4px;
      color: #fff;
      font-weight: bold;
      display: inline-block;
      text-align: center;
    }

    html, body {
        height: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
    }

    body {
        flex: 1;
    }

    main {
        flex: 1;
    }

  </style>
</head>
<body>

    <!-- HEADER -->
    <div th:insert="fragments/layout :: header"></div>

    <!-- TABLE -->
    <main class="container py-5">
        <h2>Ruta de TODOS</h2>
        <p class="text-success">últimos detalles</p>
        <div id="tabla-entregas"></div>
    </main>

    <!-- FOOTER -->
    <div th:insert="fragments/layout :: footer"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/tabulator-tables@5.5.0/dist/js/tabulator.min.js"></script>
    <script>
    const ordersData = [
        {
        id: 1,
        date_generate: '2025-06-01',
        code: 'ORD123',
        coursier: 'andres',
        customer: 'Juan Pérez',
        seller: 'Pedro Gómez',
        address: 'Calle 123 #45-67',
        condition: 'Pago contra entrega',
        method: 'EFECTIVO',
        total: '$150,000',
        status: 'ENTREGADO'
        },
        {
        id: 2,
        date_generate: '2025-06-02',
        code: 'ORD456',
        coursier: 'laura',
        customer: 'Maria Ruiz',
        seller: 'Camilo Pérez',
        address: 'Cra 10 #20-30',
        condition: 'Pago anticipado',
        method: 'NEQUI',
        total: '$200,000',
        status: 'REPROGRAMADO'
        }
    ];

    const statusColors = {
        'EN RUTA': '#A48BF4',
        'REPROGRAMADO': 'darkorange',
        'ENTREGADO': '#38BC3E',
        'ANULADO': '#FF1C1C',
        'PENDIENTE': '#dccd30',
        'COMPLETO': '#76C3A5',
        'INCOMPLETO': '#EABD31'
    };

    new Tabulator("#tabla-entregas", {
        data: ordersData,
        layout: "fitColumns",
        responsiveLayout: "collapse",
        columns: [
        { title: "Fecha desp.", field: "date_generate" },
        { title: "Código", field: "code" },
        { title: "Mensajero", field: "coursier" },
        { title: "Cliente", field: "customer" },
        { title: "Vendedor", field: "seller" },
        { title: "Dirección", field: "address" },
        { title: "Condición", field: "condition" },
        {
            title: "Método", field: "method",
            formatter: cell => {
            const value = cell.getValue();
            const color = value === "EFECTIVO" ? "#052c65" : "#fff";
            return `<span style="color: ${color};">${value}</span>`;
            }
        },
        { title: "Valor", field: "total" },
        {
            title: "Estado", field: "status",
            formatter: cell => {
            const value = cell.getValue();
            const color = statusColors[value] || 'gray';
            const textColor = value === 'PENDIENTE' ? '#000' : '#fff';
            return `<span class="status-label" style="background:${color};color:${textColor}">${value}</span>`;
            }
        },
        {
            title: "Acciones",
            formatter: () => {
            return `
                <div class="dropdown">
                <button class="btn btn-sm btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    ⋮
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Ver</a></li>
                    <li><a class="dropdown-item text-warning" href="#">Anular</a></li>
                    <li><a class="dropdown-item text-danger" href="#">Borrar</a></li>
                    <li><a class="dropdown-item" href="#">Editar</a></li>
                </ul>
                </div>`;
            },
            hozAlign: "center",
            width: 150
        }
        ]
    });
    </script>

    <!-- Bootstrap para el menú desplegable -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
